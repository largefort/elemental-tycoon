<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1, viewport-fit=cover, maximum-scale=1"
  />
  <title>Elemental Tycoon</title>

  <!-- Keep your existing stylesheets intact -->
  <link rel="stylesheet" href="styles.css" />
  <link rel="stylesheet" href="elementalicons.css" />

  <!-- Android UI niceties -->
  <meta name="theme-color" content="#0a0a0a" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-capable" content="yes" />

  <script>
    // Keep your Linux/Firefox tweak
    if (navigator.userAgent.toLowerCase().includes('linux') &&
        navigator.userAgent.toLowerCase().includes('firefox')) {
      document.documentElement.classList.add('linux-firefox');
    }
  </script>

  <!-- Minimal, self-contained layout styling for mobile scaffolding only.
       (Does NOT modify your external CSS files.) -->
  <style>
    :root { --nav-h: 64px; --hdr-h: 56px; }
    * { box-sizing: border-box; }
    body { margin: 0; }
    header.site-header {
      position: sticky; top: 0; z-index: 20;
      height: var(--hdr-h); display: flex; align-items: center; justify-content: space-between;
      padding: 0 .75rem;
      background: #0a0a0a; /* matches your dark theme */
      border-bottom: 1px solid rgba(255,255,255,.08);
    }
    header.site-header h1 { margin: 0; font-size: 1.1rem; letter-spacing:.3px; }
    header.site-header .subtitle { font-size: .75rem; opacity:.7; }

    main#game {
      padding: .75rem .75rem calc(var(--nav-h) + .75rem);
      max-width: 1100px; margin: 0 auto;
    }

    /* Tabs */
    .tabs { display: flex; gap: .5rem; margin: .5rem 0 0; }
    .tab-btn {
      flex: 1; padding: .6rem .8rem; border: 0; border-radius: .6rem;
      background: #111; color: #eee;
    }
    .tab-btn.active { outline: 2px solid #00aaff; }

    .view { display: none; }
    .view.active { display: block; }

    /* Compact cards grid for resources */
    #resources {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: .75rem;
      margin-top: .75rem;
    }
    @media (min-width: 920px) {
      #resources { grid-template-columns: repeat(3, 1fr); }
    }
    .resource { padding: .6rem; border: 1px solid rgba(255,255,255,.08); border-radius: .8rem; background:#0b0b0b; }

    /* Stats / EPS compact row */
    #stats-eps { display: grid; gap: .75rem; margin-top: .5rem; }
    @media (min-width: 720px) {
      #stats-eps { grid-template-columns: 1fr 1fr; }
    }
    #stats h3, #eps h4 { margin: .25rem 0; }

    /* Bottom navigation */
    .bottom-nav {
      position: fixed; left: 0; right: 0; bottom: 0; z-index: 30;
      height: var(--nav-h);
      display: grid; grid-template-columns: repeat(4, 1fr);
      border-top: 1px solid rgba(255,255,255,.08);
      background: #0a0a0a;
      padding: .25rem;
      padding-bottom: calc(env(safe-area-inset-bottom, 0) + .25rem);
    }
    .bottom-nav button {
      border: 0; border-radius: .75rem; margin: .25rem; padding: .4rem .25rem;
      background: #111; color: #eee; font-size: .8rem;
    }
    .bottom-nav button.active { outline: 2px solid #00aaff; }

    /* Floating HUD */
    #earnings-hud {
      position: fixed; right: .75rem; bottom: calc(var(--nav-h) + 1rem);
      background: rgba(0,0,0,.6);
      border: 1px solid rgba(255,255,255,.12);
      backdrop-filter: blur(6px);
      padding: .5rem .7rem; border-radius: .7rem; z-index: 40; font-size: .85rem;
    }

    /* Utility */
    .section-card { border: 1px solid rgba(255,255,255,.08); border-radius: .8rem; padding: .75rem; background:#0b0b0b; }
    .btn-row { display: grid; grid-template-columns: 1fr 1fr; gap: .5rem; }
    .stack { display: grid; gap: .75rem; }
  </style>
</head>

<body>
  <!-- App Header -->
  <header class="site-header">
    <div>
      <h1>Elemental Tycoon</h1>
      <div class="subtitle">Android layout</div>
    </div>
    <div id="quick-stats" aria-label="quick totals">
      <span>$<span id="money">0</span></span> ‚Ä¢
      <span><span id="essence">0</span> Essence</span> ‚Ä¢
      <span>√ó<span id="prestige-multiplier">1</span></span>
    </div>
  </header>

  <!-- Tabs (secondary) -->
  <div class="tabs" role="tablist" aria-label="Sections">
    <button class="tab-btn active" data-view="view-resources" role="tab" aria-selected="true">Resources</button>
    <button class="tab-btn" data-view="view-actions" role="tab" aria-selected="false">Actions</button>
    <button class="tab-btn" data-view="view-prestige" role="tab" aria-selected="false">Prestige</button>
    <button class="tab-btn" data-view="view-more" role="tab" aria-selected="false">More</button>
  </div>

  <main id="game">
    <!-- Floating HUD -->
    <div id="earnings-hud" aria-live="polite">
      EPS: üî•<span id="fire-eps">0</span> üåä<span id="water-eps">0</span> ‚õ∞Ô∏è<span id="earth-eps">0</span> üå¨Ô∏è<span id="air-eps">0</span>
    </div>

    <!-- VIEW: RESOURCES -->
    <section id="view-resources" class="view active" role="tabpanel" aria-label="Resources">
      <!-- Stats & EPS compact -->
      <section id="stats-eps" class="section-card">
        <div id="stats">
          <h3>Total Money: $<span id="money">0</span></h3>
          <h3>Prestige Currency: <span id="essence">0</span> Essence</h3>
          <h3>Prestige Multiplier: x<span id="prestige-multiplier">1</span></h3>
        </div>
        <div id="eps">
          <h4>Elements per Second (EPS)</h4>
          <div class="eps-values">
            <p>Fire: <span id="fire-eps">0</span></p>
            <p>Water: <span id="water-eps">0</span></p>
            <p>Earth: <span id="earth-eps">0</span></p>
            <p>Air: <span id="air-eps">0</span></p>
            <p>Light: <span id="light-eps">0</span></p>
            <p>Dark: <span id="dark-eps">0</span></p>
            <p>Void: <span id="void-eps">0</span></p>
          </div>
        </div>
      </section>

      <!-- Element Resource Cards -->
      <div id="resources" aria-label="Resource cards">
        <!-- Fire -->
        <div class="resource" id="fire-resource">
          <h2><img src="fire-icon.png" class="element-icon" alt="Fire Icon"> Fire: <span id="fire">0</span></h2>
          <div class="resource-buttons btn-row">
            <button onclick="gather('fire')">Gather Fire</button>
            <button onclick="buyAutomation('fire')">Automate Fire ($50)</button>
          </div>
          <div class="progress" id="fire-progress">
            <div class="progress-bar"></div><span>0%</span>
          </div>
        </div>

        <!-- Water -->
        <div class="resource" id="water-resource">
          <h2><img src="water-icon.png" class="element-icon" alt="Water Icon"> Water: <span id="water">0</span></h2>
          <div class="resource-buttons btn-row">
            <button onclick="gather('water')">Gather Water</button>
            <button onclick="buyAutomation('water')">Automate Water ($50)</button>
          </div>
          <div class="progress" id="water-progress">
            <div class="progress-bar"></div><span>0%</span>
          </div>
        </div>

        <!-- Earth -->
        <div class="resource" id="earth-resource">
          <h2><img src="earth-icon.png" class="element-icon" alt="Earth Icon"> Earth: <span id="earth">0</span></h2>
          <div class="resource-buttons btn-row">
            <button onclick="gather('earth')">Gather Earth</button>
            <button onclick="buyAutomation('earth')">Automate Earth ($50)</button>
          </div>
          <div class="progress" id="earth-progress">
            <div class="progress-bar"></div><span>0%</span>
          </div>
        </div>

        <!-- Air -->
        <div class="resource" id="air-resource">
          <h2><img src="air-icon.png" class="element-icon" alt="Air Icon"> Air: <span id="air">0</span></h2>
          <div class="resource-buttons btn-row">
            <button onclick="gather('air')">Gather Air</button>
            <button onclick="buyAutomation('air')">Automate Air ($50)</button>
          </div>
          <div class="progress" id="air-progress">
            <div class="progress-bar"></div><span>0%</span>
          </div>
        </div>

        <!-- Light -->
        <div class="resource" id="light-resource">
          <h2><img src="light-icon.png" class="element-icon" alt="Light Icon"> Light: <span id="light">0</span></h2>
          <div class="resource-buttons btn-row">
            <button onclick="gather('light')">Gather Light</button>
            <button onclick="buyAutomation('light')">Automate Light ($50)</button>
          </div>
          <div class="progress" id="light-progress">
            <div class="progress-bar"></div><span>0%</span>
          </div>
        </div>

        <!-- Dark -->
        <div class="resource" id="dark-resource">
          <h2><img src="dark-icon.png" class="element-icon" alt="Dark Icon"> Dark: <span id="dark">0</span></h2>
          <div class="resource-buttons btn-row">
            <button onclick="gather('dark')">Gather Dark</button>
            <button onclick="buyAutomation('dark')">Automate Dark ($50)</button>
          </div>
          <div class="progress" id="dark-progress">
            <div class="progress-bar"></div><span>0%</span>
          </div>
        </div>

        <!-- Void -->
        <div class="resource" id="void-resource">
          <h2><img src="void-icon.png" class="element-icon" alt="Void Icon"> Void: <span id="void">0</span></h2>
          <div class="resource-buttons btn-row">
            <button onclick="gather('void')">Gather Void</button>
            <button onclick="buyAutomation('void')">Automate Void ($50)</button>
          </div>
          <div class="progress" id="void-progress">
            <div class="progress-bar"></div><span>0%</span>
          </div>
        </div>
      </div>
    </section>

    <!-- VIEW: ACTIONS -->
    <section id="view-actions" class="view" role="tabpanel" aria-label="Actions">
      <div class="section-card stack">
        <h2>Marketing Strategies</h2>
        <div class="marketing-buttons btn-row">
          <button onclick="buyMarketing('fire')">Promote Fire ($10)</button>
          <button onclick="buyMarketing('water')">Promote Water ($10)</button>
          <button onclick="buyMarketing('earth')">Promote Earth ($10)</button>
          <button onclick="buyMarketing('air')">Promote Air ($10)</button>
          <button onclick="buyMarketing('light')">Promote Light ($10)</button>
          <button onclick="buyMarketing('dark')">Promote Dark ($10)</button>
          <button onclick="buyMarketing('void')">Promote Void ($10)</button>
        </div>
      </div>

      <div class="section-card">
        <h2>Automation (Quick Access)</h2>
        <div class="btn-row" style="grid-template-columns: repeat(3,1fr);">
          <button onclick="buyAutomation('fire')">Auto Fire</button>
          <button onclick="buyAutomation('water')">Auto Water</button>
          <button onclick="buyAutomation('earth')">Auto Earth</button>
          <button onclick="buyAutomation('air')">Auto Air</button>
          <button onclick="buyAutomation('light')">Auto Light</button>
          <button onclick="buyAutomation('dark')">Auto Dark</button>
          <button onclick="buyAutomation('void')">Auto Void</button>
        </div>
      </div>
    </section>

    <!-- VIEW: PRESTIGE -->
    <section id="view-prestige" class="view" role="tabpanel" aria-label="Prestige">
      <div id="prestige" class="section-card stack">
        <h2>Prestige System</h2>
        <button onclick="prestige()">Prestige (Requires $100,000)</button>
        <p>Prestige Multiplier: x<span id="prestige-multiplier">1</span></p>
        <button onclick="deleteProgress()">Delete Progress</button>
      </div>
    </section>

    <!-- VIEW: MORE -->
    <section id="view-more" class="view" role="tabpanel" aria-label="More">
      <div id="version-switching" class="section-card">
        <h2>Version Switching</h2>
        <div class="btn-row">
          <button onclick="switchVersion('live')">Switch to Live</button>
          <button onclick="switchVersion('alpha')">Switch to Alpha</button>
          <button onclick="switchVersion('mobile')">Switch to Mobile</button>
        </div>
      </div>

      <div id="jokes" class="section-card" style="margin-top:.75rem;">
        <h2>Jokes of The Day-disabled-for-good</h2>
        <p id="joke-display">Click the button for a joke!</p>
        <button onclick="getRandomJoke()">Get a Joke!</button>
      </div>
    </section>
  </main>

  <!-- Bottom Nav -->
  <nav class="bottom-nav" role="navigation" aria-label="Primary">
    <button class="active" data-view="view-resources">Resources</button>
    <button data-view="view-actions">Actions</button>
    <button data-view="view-prestige">Prestige</button>
    <button data-view="view-more">More</button>
  </nav>

  <!-- Your core game logic -->
  <script src="script.js"></script>

  <!-- Lightweight UI wiring: tabs + HUD mirror (doesn't alter your game logic) -->
  <script>
    (function () {
      const views = Array.from(document.querySelectorAll('.view'));
      const tabButtons = Array.from(document.querySelectorAll('.tab-btn'));
      const navButtons = Array.from(document.querySelectorAll('.bottom-nav button'));

      function setActive(viewId) {
        views.forEach(v => v.classList.toggle('active', v.id === viewId));
        [...tabButtons, ...navButtons].forEach(b =>
          b.classList.toggle('active', b.dataset.view === viewId)
        );
      }

      [...tabButtons, ...navButtons].forEach(btn => {
        btn.addEventListener('click', () => setActive(btn.dataset.view));
      });

      // Floating HUD mirrors EPS and money in near-real time
      const hud = document.getElementById('earnings-hud');
      function syncHUD() {
        // If your script.js updates these spans, we just mirror them
        const money = document.querySelectorAll('#money');
        if (money.length) {
          hud.setAttribute('title', 'Total: $' + money[0].textContent.trim());
        }
      }
      setInterval(syncHUD, 500);

      // Ensure only one #prestige-multiplier is read for header quick stats
      // (keeps header numbers fresh as your game updates DOM)
      const pmHeader = document.querySelector('#quick-stats #prestige-multiplier');
      const pmAny = document.querySelectorAll('#prestige-multiplier');
      function syncPM() {
        if (pmHeader && pmAny.length) pmHeader.textContent = pmAny[pmAny.length-1].textContent;
      }
      setInterval(syncPM, 700);
    })();
  </script>
</body>
            </html>
